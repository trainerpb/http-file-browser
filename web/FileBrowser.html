<head>
<style>
    table {
        border-collapse: collapse;
        width: 50%;
        margin: 20px auto;
    }
    th, td {
        border: 1px solid #999;
        padding: 8px;
        text-align: left;
    }
    th {
        background-color: #f2f2f2;
    }
</style>
</head>
<body>
<div id="table-container"></div>

<h1>Trying to build a File browser UI with Ajax</h1>

<button onclick="callMe()"> Click Me to Start AjaxCall </button>
<span id="lbl"></span>
<textarea rows="20" cols="80" placeholder="Enter text limit 15" onkeydown="return limit(this.value.length)"></textarea>

<script>
   function limit(z){
       document.getElementById("lbl").innerHTML = (15-z)+" chars remaiing";
       return z<15;
   }
    function callMe(){
    var xhr= new XMLHttpRequest();

    xhr.open("GET","http://localhost:8080/browser/explore?dir=C%3A%5CUsers%5CIdeal_%5CDesktop%5CWebDev%5CFirst%5Cassets",true)
    xhr.onreadystatechange=function (){
      if(xhr.readyState === 4 && xhr.status === 200){
          alert(xhr.responseText);
          renderTable(JSON.parse(xhr.response));
      }
    };
xhr.send();
 }

    function renderTable(jsonData) {
        const container = document.getElementById("table-container");
        const table = document.createElement("table");

        // Create header row
        const headerRow = document.createElement("tr");
        Object.keys(jsonData[0]).forEach(key => {
            const th = document.createElement("th");
            th.textContent = key;
            headerRow.appendChild(th);
        });
        table.appendChild(headerRow);

        // Create data rows
        jsonData.forEach(item => {
            const row = document.createElement("tr");
            Object.values(item).forEach(value => {
                const td = document.createElement("td");
                td.textContent = value;
                row.appendChild(td);
            });
            table.appendChild(row);
        });

        container.appendChild(table);
    }



</script>